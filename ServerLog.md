# 建站日志

## 2022.05.31

- 想在暑假期间搭一台**个人服务器**，还找到了想要注册的**域名**。
- 下单**机械硬盘**，打算放服务器里用于存储主要文件。
    - *-￥399*

## 2022.06.01

- **机械硬盘**到手，但是并没有什么用。

## 2022.06.21

- 注册了自己的第一个**域名** - `geter.cc`，有丶美滋滋。
    - *-￥107*
- 下载**Windows Server**镜像文件。
- 下单半成品的**服务器主机**，这是第一个大手笔！
    - *-￥1757*

## 2022.06.24

- 了解了一下**公网IP**的获取方法。
    - 但是家里目前用的是**移动**的宽带，很不巧，移动是宁愿把你宽带退掉也不会分配公网IP的……
    - 所以考虑了一下要不要换**电信**的宽带。
    - 但是好像现在基本上都会自动分配到**IPv6**的公网IP吧，可以先试试。

## 2022.06.25

- **服务器主机**到手力，怎么那么大……
    - 但是同样的600W**电源**，这噪音比学校里面的台式机轻太多了，几乎没有！
- 确认主机中还未装配的硬件。
- 下单**ECC DDR4**内存。
    - *-￥805*
- 下单**SFF-8087转4SATA**线。
    - *-￥22.54*
- 下单**SSD**，系统就放这了。
    - *-￥119*
- 下单**PCie转M.2**卡。
    - *-￥59*
- 在**VMWare**上安装镜像文件，试图模拟服务器使用流程。
    - 成功配置了**Web服务器**。
    - 成功配置了**文件服务器**。
    - 成功配置了**远程桌面**。
    - > 这一切看起来都是那么顺利……我以为离成功只差把完整的服务器组装起来了。

## 2022.06.26

- 下单**超六类**网线，打算接**IPMI**远程管理。
    - *-￥8.9*
- **SATA转接线**到手。
- **SSD**到手。
- **M.2转接卡**到手。
- **内存**到手，终于等到了！！最关键的东西来的却最迟。
- 组装！！！
- 打算把**系统**装进**SSD**里面，但是一直报错……
    - 可能是转接卡的缘故，启动项不是很好设置，在BIOS里面跌跌撞撞了半天没成功。
    - 先是在CSDN上找解决方案，一通乱按之后，看到一条回答说，卖转接卡的客服会帮忙设置BIOS的，然后我就去找了，结果客服转线转了几回，说的所有的方法都没有用。
    - 然后去问了SSD的客服，说是去仓库一趟，十分钟后回来，然后……就没有然后了。
    - 最后还是问了服务器的客服，直接就让我用PE装了，这个对我来说本来就是最后手段了，但是没办法，就用PE硬装把系统装到SSD里面了，还设置了引导项啥的。
    - `崩溃` * 1。
- 安装**Web服务器**功能。
- 安装**文件服务器**功能。
- 安装**远程桌面**功能。
- 开始用`Java`写**DDNS**代码，把**IPv6**提交到服务商解析。
    - 顺便写了个**Windows服务**，每次开机都自动以5分钟为频率更新。

## 2022.06.27

- 第一次打给移动客服直接转的人工服务，问**备案**的事情，结果一直说听清楚我在说什么……
- 第二次跟客服要公网IP，客服问我是企业用户还是个人用户，然后说**公网IP是不会向个人开放的**。
- 尝试用IPv6凑合吧。但是！家里移动的光猫好像版本太老了，就不提供IPv6，用**超级管理员**账号登进去改配置也没用，还差点导致全家都用不了WIFI……
- 第三次问客服光猫的事情，客服问了好几遍才把**IPv6**这几个字从他嘴里挤出来，然后说不提供公网IP。我说就连DHCP的IPv6好像都没分到，他说没有相关资料，已经记录了，并且**强调不提供公网IP**。
- `崩溃` * 2。
- 了解了一下电信的宽带业务。

## 2022.06.28

- 第一次打给电信的客服，问了一下能不能提供公网IP，**说：“可以。”**
- 第二次问了一下套餐资费的问题，本来打算办**200M**的，客服建议我升到**千兆**，而且差的价格不是很大，甚至送个路由器。我说考虑一下，她问我有什么顾虑吗，我就说了公网IP的事情，客服**说：“你放心，公网IP我们会提供的。”**（伏笔）
- :)
- 让安装师傅下午过来**装宽带**。
- 感觉屏幕左下角显示的评估版本倒计时有点烦，就找遍全网求一个激活码……
    - `崩溃` * 3。
- 最后穷途末路，走向淘宝，客服很耐心，教了好几条指令，总算把系统**永久激活**了。
    - *-￥15*
- 装了**电信宽带**，心在滴血……
    - *-￥1499*
- 第三次跟客服要来了**公网IP**。
- 但是各种查看还是没有看到**公网**的迹象，才想起来安装师傅说要让客服把光猫改**桥接**。
- 第四次把光猫从**路由模式**改成**桥接模式**。（伏笔）
- **宽带拨号**连网之后，我用笔记本电脑`Ping`了一下**IPv4**，卧槽，卧槽，卧槽，卧槽，通了！
    - > *BGM: Queen - We Are The Champions*
- ~~激动地在房间里面走来走去。~~
- 充满兴致开始**配置服务器**。
    - > 这一切虽然并不顺利……我以为离成功只差把公网IP设置上了。（梅开二度）
- 但是实际上，除了`Ping`通之外，什么都没成功了……
    - 目前的配置是：
        - 光猫 --> 主机
        - 光猫 --> IPMI
- 查了资料之后感觉，应该是电信把**端口**封了。
    - 然后我在笔电上用`telnet`测端口，在服务器上用**Wireshark**抓包，发现确实有些端口被疯掉了……包括但不限于`80` `443` `134` `135` `136` `138` `139` `445`等。
        - > **计算机网络实验**永远滴神！
- 开始在光猫里面设置**端口转发**，但是并没有什么用，无论怎么设置都没用。
- 然后我就在光猫里面看配置，越看越不对劲，**公网IP**和**DHCPIP**都在一根网线上，连一台主机，那转发是……谁发给谁？
- 突然就明白**路由**是怎么回事了！！！！
    - > **计算机网络**永远滴神！
    - > 感谢客服让我办的套餐送了新的路由器！！
- 打电话给安装师傅要来了路由器管理员密码，**拨号上网**，配置好**端口转发**，从`800`转发到`80`。
    - 目前的配置是：
        - 光猫 --> 路由器
        - 路由器 --> 主机
        - 路由器 --> IPMI
- 打开笔电，浏览器输入域名和端口，通了！！！
    - > *BGM: Queen - We Are The Champions*

## 2022.06.29

- **服务器**接在路由器上之后，就不能直接获取**公网IP**的地址了，有点纳闷……
- 发现路由器的**配置主页**有标注**IP地址**，只要拿出来就行了！
- 重写了**DDNS**代码，从路由器主页登录并获取**IP地址**后提交到服务商。
- 开始配置**IPMI**，但是甚至**Ping**都通不了，后来重启了一下就好了。
- 在**BIOS**里面又折腾了半天，把账号密码配置好了。
- 成功**远程开关机**。
- 电信在每个地区都有**备案热线**，直接就打过去了，客服小姐姐感觉很祥和，不跟其他客服一样*热情*，然后加了微信，头像是*アーニャ*，昵称是*幸运星*，wwwwwww。
    - 交了资料之后，就一边看番一边补其他资料了。

## 2022.06.30

- 加了点代码，每次更换域名都会**自动发送邮件**到QQ邮箱，避免解析失败等原因导致域名无法使用。
- 顺便加了输入参数，把程序变成**CLI**的形式。

## 2022.07.01

- 妈妈说打算把移动的千兆宽带取消了，我就把之前**华为**的路由器接到电信的光猫上了。
- 在服务器上安装了**qBittorrent**，并将之前的种子及资源文件进行转移。
- 原本**TP-Link**的路由器只要两条请求就可以拿到**WANIP**了，但是华为的好像还有很多层加密。
- 在**Github**上找到了一个输出华为路由器连接设备的项目，但是是`TypeScript`的，虽然很不情愿，但是还是clone下来研究了一整天，从华为的路由器管理界面拿到了**WANIP**。

## 2022.07.02

- 把所有`Java`代码移植为`TypeScript`了。
- 通过各种方式研究`445`端口，但是好像都不行，问了客服，结果说是全部都打开了。

## 2022.07.03

- 安装了**Mysql**。

## 2022.07.04

- 去了趟电信营业厅问**445端口**的事情，得到了一堆*我不知道*和*我可能知道但是我不能告诉你*之类的回答之后就回家了。
- 下了破解版的**Porttunnel**，应该是拦截转发了**445端口**吧，终于成功连接**文件服务器**了。
    - > *BGM: Queen - We Are The Champions*
- 把`TypeScript`版本的**DDNS**注册成了Windows服务。

## 2022.07.06

- 跟之前备案的客服小姐姐交流了一下之后发现，动态IP应该是没法备案了……寄。
    - > 还是自己太年轻太无知了。
